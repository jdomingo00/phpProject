var assert = require('assert');
var hpack = require('../');

describe('hpack/encoder', function() {
  var encoder;

  beforeEach(function() {
    encoder = hpack.encoder.create();
  });

  function expect(arr, enc) {
    function isNumber(num) {
      return typeof num === 'number';
    }

    var out = Buffer.concat(encoder.render()).toString('hex');
    if (Array.isArray(arr) && !arr.every(isNumber)) {
      arr = arr.map(function(item) {
        return new Buffer(item, enc);
      });
      arr = Buffer.concat(arr);
    } else {
      arr = new Buffer(arr, enc);
    }
    var actual = arr.toString('hex');
    assert.equal(out, actual);
  }

  describe('bit', function() {
    it('should encode n